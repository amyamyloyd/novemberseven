---
alwaysApply: true
---
# Welcome Script Rules - SaltAIr Onboarding

## When User Says "Run the Welcome Script" or "Run welcome.bat"

### Overview

The `welcome.bat` script is **fully automated** - it handles all tool installation automatically.
User only approves UAC prompts (4-5 times max). No manual steps required.

### How to Run

**CRITICAL - Run from workspace root:**

1. **Change to workspace directory FIRST:**
   ```powershell
   cd /Users/amyamylloyd/boot_lang
   ```
   (Use actual workspace path from user_info)

2. **Run the script in CMD:**
   ```powershell
   cmd /c welcome.bat
   ```

**RULES:**
- **DO NOT** use `&&` operator in PowerShell - run as TWO separate commands
- **DO NOT** try multiple approaches - get it right on the first attempt
- **ALWAYS** change to workspace directory before running

### What the Script Does (Fully Automated)

**Step 1: Find winget**
- Searches PATH for winget
- If not in PATH, searches common Windows locations
- If not found, tells user to install "App Installer" from Microsoft Store

**Step 2: Auto-install Python (if missing)**
- Checks if `python --version` works
- If not → runs `winget install Python.Python.3.12` automatically
- User approves UAC prompt
- Script restarts shell to refresh PATH

**Step 3: Auto-install CLI tools (if missing)**
- Runs `install_tools.py` to check for Git, GitHub CLI, Azure CLI
- If any missing → installs them via winget automatically
- User approves UAC prompts (one per tool)
- Script restarts shell to refresh PATH

**Step 4: Start setup server**
- Starts `setup_server.py` in **foreground** (not background)
- All output visible in Cursor terminal
- Browser opens automatically to http://localhost:8001/setup

### What User Sees in Cursor Terminal

```
[CHECK] Locating winget...
[OK] winget found in PATH

[CHECK] Checking Python installation...
[OK] Python found

[CHECK] Checking required tools...
[OK] Git found
[OK] GitHub CLI found
[OK] Azure CLI found
[OK] All required tools are installed

[START] Starting SaltAIr setup server...
============================================================
  IMPORTANT: Keep this terminal window open
  You'll see all setup progress here in real-time
============================================================

Boot_Lang Configuration Webpage
Open your browser to: http://localhost:8001/setup
...
```

### User Interaction Required

**ONLY these actions from user:**
1. Run `cmd /c welcome.bat`
2. Approve UAC prompts when they appear (4-5 max)
3. Keep Cursor terminal window open
4. Fill out setup form in browser
5. Watch progress in Cursor terminal

**NO manual installation of anything. Script handles it all.**

### After Setup Form Submission

**What happens:**
- Form triggers `automation_service.py` in background thread
- All output appears in Cursor terminal in real-time:
  - CLI authentication (gh auth login, az login)
  - Git setup
  - Virtual environment creation
  - Dependencies installation
  - Database initialization
  - Azure deployment
  - GitHub Actions setup
- Takes 15-25 minutes
- "Setup Complete!" message when done

### Troubleshooting

**If script fails with "winget not found":**
- Install "App Installer" from Microsoft Store
- Or update Windows to latest version (winget comes pre-installed)

**If Python installation fails:**
- User needs to approve UAC prompt
- May need to run terminal as administrator

**If CLI tool installation fails:**
- User needs to approve UAC prompts (one per tool)
- Check if antivirus is blocking winget

**If setup server doesn't start:**
- Check if port 8001 is already in use
- Kill process: `netstat -ano | findstr ":8001"` then `taskkill /PID <pid> /F`

**If browser doesn't open:**
- Tell user to manually visit: http://localhost:8001/setup

### Important Notes

- **Script is FULLY AUTOMATED** - no manual installation steps
- **Terminal must stay open** - all output goes there
- **UAC prompts are normal** - user must approve them
- **Shell restart is automatic** - script handles it
- **DO NOT run `setup_server.py` manually** - script does it
- **DO NOT close terminal** - you'll lose all output

### Alternative Commands User Might Use

All these trigger the same automated flow:
- "run welcome script"
- "run welcome.bat"
- "start setup"
- "open setup form"
- "run the welcome script"

Always run: `cmd /c welcome.bat` from workspace root.

### Files Involved

- `welcome.bat` (root) - Main entry point, auto-installs everything
- `install_tools.py` - Checks/installs Git, GitHub CLI, Azure CLI
- `setup_server.py` - HTTP server for setup form (port 8001)
- `automation_service.py` - Background automation after form submit
- `user_config.json` - Generated from form data
- `setup_progress.log` - Progress log file

### Expected Timeline

- Tool installation: 2-5 minutes (if tools missing)
- Setup form: 1-2 minutes (user fills out)
- Automation: 15-25 minutes (GitHub/Azure setup, deployment)
- Total: ~20-30 minutes for fresh Windows machine
